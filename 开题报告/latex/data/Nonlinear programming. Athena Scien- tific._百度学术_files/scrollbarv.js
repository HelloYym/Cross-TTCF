(function(){A.ui.scrollbarv=function(b){return new a(b)};function a(x){var q=this;this.options=x;var Y=x.scrollbar||$("<div>").get(0),j=x.content,N=$(x.content).children().get(0),i=x.initPos||0,M=x.initDom||null,U=x.mousewheel||true,l=x.mousewheellock||false,H=x.wheeldelta||1,z=x.ctrlblock||0,J=x.step||0.1,r=x.length,I=x.scale||0,G=x.theme||"",ad=x.refresh||false;A.uicss("scrollbarv/scrollbarv"+(G?"-"+G:"")+".css");var S=0,T=0,h=0,V=function(ag){var af=parseInt(S-T);if(af>0){var ag=ag.value;j.scrollTop=af*ag}},w=$("<div>",{"class":"opui-scroll-up"}).get(0),e=$("<div>",{"class":"opui-scroll-down"}).get(0),v=$("<div>",{"class":"opui-scroll-axis"}).get(0),g=$("<div>",{"class":"opui-scroll-slider OP_LOG_BTN"}).get(0),u=$("<div>",{"class":"opui-scroll-s-top"}).get(0),F=$("<div>",{"class":"opui-scroll-s-bottom"}).get(0),ae=$("<div>",{"class":"opui-scroll-s-block"}).get(0),W=0,Q=z||0,k=0,R=Q,m=0,C=0,L=0,d=0,t=null,b=null,ab,P,D;var y=function(){X=false;c=false};if(!x.scrollbar){$(j).after($(Y))}$(j).addClass("opui-scroll-ctrl-content");$(Y).addClass("opui-scroll-ctrl-scroll");$(Y).attr("data-click",'{fm:"beha"}');this.render=function(ag){if(!ad){clearInterval(D)}try{T=j.offsetHeight;h=Y.offsetHeight;S=N.offsetHeight}catch(ah){}W=ag||r||T-2;$(Y).css({height:(W+"px")});$(v).css({height:(W+"px")});if(W>=0&&S>=0){if(S<=W+2){$(Y).hide()}else{$(Y).show()}if(I!=(S/W)){I=S/W;o(I);Z(0)}var af=0;if(M){if(M.offsetTop+M.scrollHeight>=S){af=1}else{if(M.offsetTop+M.scrollHeight<=T){af=0}else{af=M.offsetTop/S}}Z(af);var ai=K(h*af,R);if(ai>W-k){ai=W-k}}if(i){Z(i);var ai=K(h*i,R);if(ai>W-k){ai=W-k}}}};D=setInterval(this.render,50);$(Y).empty();if(z&&w.offsetHeight==e.offsetHeight){var X=false;var c=false;Y.appendChild(w);Y.appendChild(e);$(w).on("mousedown",function(){O();X=true});$(e).on("mousedown",function(){ac();c=true});$(w).on("mouseup",function(){$(Y).removeClass("opui-scroll-ctrl-scroll-touch");X=false});$(e).on("mouseup",function(){$(Y).removeClass("opui-scroll-ctrl-scroll-touch");c=false});$(document).on("mouseup",y)}Y.appendChild(v);Y.appendChild(g);g.appendChild(u);g.appendChild(F);g.appendChild(ae);g.onDragstart=function(){return false};$(g).on("mouseover",function(){$(g).addClass("opui-scroll-slider-hover");$(Y).addClass("opui-scroll-ctrl-scroll-hover")});$(g).on("mousedown",function(){$(g).addClass("opui-scroll-slider-touch");$(Y).addClass("opui-scroll-ctrl-scroll-touch")});$(g).on("mouseout",function(){$(g).removeClass("opui-scroll-slider-hover")});$(g).on("mouseup",function(){$(g).removeClass("opui-scroll-slider-touch")});$(Y).on("mouseover",function(){$(Y).addClass("opui-scroll-ctrl-scroll-hover")});$(Y).on("mousedown",function(){$(Y).addClass("opui-scroll-ctrl-scroll-touch")});$(Y).on("mouseout",function(){$(Y).removeClass("opui-scroll-ctrl-scroll-hover")});$(Y).on("mouseup",function(){$(Y).removeClass("opui-scroll-ctrl-scroll-touch")});$(v).on("click",s);if(U&&!this.onwheel){if(!$(j).hasClass("opui-scroll-onwheel")){$(j).on("DOMMouseScroll",p);$(j).on("mousewheel",p);$(j).addClass("opui-scroll-onwheel")}}if(j){$(j).on("scroll",function(){if(!d){Z(j.scrollTop/(j.scrollHeight-j.offsetHeight),1)}})}$(g).on("mousedown",function(af){t=document.onselectstart;document.onselectstart=function(){return false};b=window.setInterval(n,40);$(N).css({"-moz-user-select":"none"});$(N).css({"-webkit-user-select":"none"});L=af.clientY-g.offsetTop;$(document).on("mousemove",f);$(document).on("mouseup",aa);d=1;af.preventDefault();return false});function K(ag,ah,af){if(af){ag=ag>af?af:ag}return ag>=ah?ag:ah}function n(){V.call(window,{value:C,scale:I})}function O(){if(ab){clearInterval(ab)}E();ab=setInterval(function(){if(X){E()}else{clearInterval(ab)}},100)}function ac(){if(P){clearInterval(P)}B();P=setInterval(function(){if(c){B()}else{clearInterval(P)}},100)}function E(){var af=C-J;af=(af<0)?0:af;Z(af)}function B(){var af=C+J;af=(af>1)?1:af;Z(af)}function f(af){af=window.event||af;var ag=K(af.clientY-L,R,m);C=(ag-R)/(m-R);$(g).css({top:(ag+"px")});return false}function aa(){$(Y).removeClass("opui-scroll-ctrl-scroll-hover");$(Y).removeClass("opui-scroll-ctrl-scroll-touch");$(g).removeClass("opui-scroll-slider-hover");$(g).removeClass("opui-scroll-slider-touch");$(N).css({"-moz-user-select":""});$(N).css({"-webkit-user-select":""});if(b){window.clearInterval(b)}if(t){document.onselectstart=t}else{document.onselectstart=function(){return true}}$(document).unbind("mousemove",f);$(document).unbind("mouseup",aa);$(g).addClass("opui-scroll-slider OP_LOG_BTN");d=0;return false}function s(af){Z((af.offsetY||af.layerY)/W)}function Z(ah,af){ah=ah<0?0:ah;ah=ah>1?1:ah;C=ah;var ag=(m-R)*C+R;$(g).css({top:(ag+"px")});if(!af){n()}}function p(af){af.preventDefault();af=af.originalEvent;if(af){this.onwheel=1;var ai=(-af.wheelDelta||(af.detail&&af.detail*40)||0)/H;var ah=ai;var ag=ah>0?j.scrollTop+2:j.scrollTop-2;$(N).css({zoom:"1"});if(ag>0&&(ag<(N.offsetHeight-j.offsetHeight+5)||(N.offsetHeight-j.scrollHeight<0&&ah<0))){j.scrollTop+=ah;C=j.scrollTop/(j.scrollHeight-j.offsetHeight)}else{if(!l||$(Y).css("display")=="none"){document.documentElement.scrollTop+=ah;document.body.scrollTop+=ah}}}}function o(af){I=(af>10)?10:af;if(I<=1){$(g).css({display:"none"});return}$(g).css({display:"block"});var ag=W-2*Q;k=parseInt(ag/I);k=(k<15)?15:k;m=W-Q-k;$(g).css({height:(k+"px")})}if(I>1){o(I)}this.dispose=function(){if(t){document.onselectstart=t}else{document.onselectstart=function(){return true}}$(document).unbind("mousemove",f);$(document).unbind("mouseup",aa);$(document).unbind("mouseup",y);if(b){clearInterval(b)}if(ab){clearInterval(ab)}if(P){clearInterval(P)}if(D){clearInterval(D)}}}})();